---
import Layout from "@layouts/Layout.astro";
import { getAllBranches } from "../lib/firebase.js";

import Splide from "@components/Splide.astro";
import Card from "@components/Card.astro";

const branches = await getAllBranches();
---

<Layout title="Lomo Alemán - Sandwichería y Delivery">
  <main>
    <Splide />

    <!-- Locales -->
    <section class="section-branches">
      <div class="container mx-auto px-4 lg:px-0">
        <!-- header -->
        <header class="text-center">
          <h3 class="text-4xl font-bold my-8">Locales</h3>
        </header>
        <!-- grid -->
        {branches.length > 0 ? (
          <ul class="grid grid-cols-1 gap-4 | lg:grid-cols-3 lg:gap-6">
            {
              branches.map((local) => (
                <Card
                  name={local.name}
                  address={local.address}
                  href={`/local/${local.slug}`}
                />
              ))
            }
          </ul>
        ) : (
          <div class="text-center py-12">
            <p class="text-gray-600">No se pudieron cargar los locales en este momento.</p>
            <p class="text-sm text-gray-500 mt-2">Por favor, intenta más tarde.</p>
          </div>
        )}
      </div>
    </section>

    <!-- Negocios -->
    <section class="section-business mt-12">
      <div class="container mx-auto px-4 lg:px-0">
        <!-- header -->
        <header class="text-center">
          <h3 class="text-4xl font-bold my-8">Tambien puede visitar</h3>
        </header>
        <!-- grid -->
        <ul class="grid grid-cols-1 lg:grid-cols-3 gap-4">
          <li>
            <a
              href="https://www.instagram.com/dolccefest/"
              target="_blank"
              class="block text-center border-2 rounded-md border-[#FFAA00] overflow-hidden hover:border-white transition"
            >
              <img
                src="/index/dolce.jpg"
                alt="monpetit"
                class="h-96 w-full object-cover"
              />
              <div class="px-12 py-4">
                <h4 class="font-medium mb-3">DolceFest</h4>
                <p class="text-xs">Carritos de algodón, popcorn, churros, frutas, etc.</p>
              </div>
            </a>
          </li>
          <li>
            <a
              href="https://www.instagram.com/santochurroccp/"
              target="_blank"
              class="block text-center border-2 rounded-md border-[#FFAA00] overflow-hidden hover:border-white transition"
            >
              <img
                src="/index/churro.png"
                alt="monpetit"
                class="h-96 w-full object-cover"
              />
              <div class="px-12 py-4">
                <h4 class="font-medium mb-3">Santo Churro</h4>
                <p class="text-xs">Próximamete.</p>
              </div>
            </a>
          </li>
          <li>
            <a
              href="https://sunsetlitoral.cl/"
              target="_blank"
              class="block text-center border-2 rounded-md border-[#FFAA00] overflow-hidden hover:border-white transition"
            >
              <img
                src="/index/sunset.png"
                alt="monpetit"
                class="h-96 w-full object-cover"
              />
              <div class="px-12 py-4">
                <h4 class="font-medium mb-3">Sunset litoral Penco</h4>
                <p class="text-xs">
                  Estamos en Línea Férrea, Cochrane 53, Penco.
                </p>
              </div>
            </a>
          </li>
        </ul>
      </div>
    </section>
  </main>
</Layout>